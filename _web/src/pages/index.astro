---
import NoteCard from "../components/NoteCard.astro";
import PostCard from "../components/PostCard.astro";

import Layout from "../layouts/Layout.astro";
import { getAllPublishedPosts } from "../lib/published";

const posts = await getAllPublishedPosts();
---

<style>
  .page-title {
    font-size: 1.5rem;
    font-weight: bold;
    margin-bottom: 2rem;
  }
  .no-posts {
    color: #6b7280;
  }
</style>

<Layout title="Blog" description="Personal blog with notes and posts">
  <h1 class="page-title">Latest Posts</h1>
  
  {posts.length === 0 ? (
    <p class="no-posts">No posts published yet.</p>
  ) : (
    <div>
      {posts.map(post => (
        post.data.type === "post" ? <PostCard post={post} /> : <NoteCard note={post} />
      ))}
    </div>
  )}
</Layout>
